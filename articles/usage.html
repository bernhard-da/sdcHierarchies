<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Usage of the sdcHierarchies-Package • sdcHierarchies</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Usage of the sdcHierarchies-Package">
<meta property="og:description" content="sdcHierarchies">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sdcHierarchies</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.21.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/usage.html">Usage of the sdcHierarchies-Package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/bernhard-da/sdcHierarchies/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Usage of the sdcHierarchies-Package</h1>
                        <h4 data-toc-skip class="author">Bernhard
Meindl</h4>
            
            <h4 data-toc-skip class="date">2024-01-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/bernhard-da/sdcHierarchies/blob/HEAD/vignettes/usage.Rmd" class="external-link"><code>vignettes/usage.Rmd</code></a></small>
      <div class="hidden name"><code>usage.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>sdcHierarchies</code> packages allows to create, modify and
export nested hierarchies that are used for example to define tables in
statistical disclosure control software such as in <a href="https://cran.r-project.org/package=sdcTable" class="external-link"><strong>sdcTable</strong></a></p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Before using, the package needs to be loaded:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/bernhard-da/sdcHierarchies" class="external-link">sdcHierarchies</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="create-and-modify-a-hierarchy-from-scratch">Create and modify a hierarchy from scratch<a class="anchor" aria-label="anchor" href="#create-and-modify-a-hierarchy-from-scratch"></a>
</h3>
<p><code><a href="../reference/hier_create.html">hier_create()</a></code> allows to create a hierarchy. Argument
<code>root</code> specifies the name of the root node. Optionally, it is
possible to add some nodes to the top-level by listing their names in
argument <code>node_labs</code>. Also, <code><a href="../reference/hier_display.html">hier_display()</a></code> shows
the hierarchical structure of the current tree as shown below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_create.html">hier_create</a></span><span class="op">(</span>root <span class="op">=</span> <span class="st">"Total"</span>, nodes <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/hier_display.html">hier_display</a></span><span class="op">(</span><span class="va">h</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Total</span></span>
<span><span class="co">## ├─A</span></span>
<span><span class="co">## ├─B</span></span>
<span><span class="co">## ├─C</span></span>
<span><span class="co">## ├─D</span></span>
<span><span class="co">## └─E</span></span></code></pre>
<p>Once such an object is created, it can be modified by the following
functions:</p>
<ul>
<li>
<code><a href="../reference/hier_add.html">hier_add()</a></code>: allows to add nodes to the hierarchy</li>
<li>
<code><a href="../reference/hier_delete.html">hier_delete()</a></code>: allows to delete nodes from the
tree</li>
<li>
<code><a href="../reference/hier_rename.html">hier_rename()</a></code>: allows to rename nodes</li>
</ul>
<p>These functions can be applied as shown below:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## adding nodes below the node specified in argument `node`</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_add.html">hier_add</a></span><span class="op">(</span><span class="va">h</span>, root <span class="op">=</span> <span class="st">"A"</span>, nodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a1"</span>, <span class="st">"a2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_add.html">hier_add</a></span><span class="op">(</span><span class="va">h</span>, root <span class="op">=</span> <span class="st">"B"</span>, nodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b1"</span>, <span class="st">"b2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_add.html">hier_add</a></span><span class="op">(</span><span class="va">h</span>, root <span class="op">=</span> <span class="st">"b1"</span>, nodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b1_a"</span>, <span class="st">"b1_b"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># deleting one or more nodes from the hierarchy</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_delete.html">hier_delete</a></span><span class="op">(</span><span class="va">h</span>, nodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a1"</span>, <span class="st">"b2"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_delete.html">hier_delete</a></span><span class="op">(</span><span class="va">h</span>, nodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># rename nodes</span></span>
<span><span class="va">h</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_rename.html">hier_rename</a></span><span class="op">(</span><span class="va">h</span>, nodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C"</span> <span class="op">=</span> <span class="st">"X"</span>, <span class="st">"D"</span> <span class="op">=</span> <span class="st">"Y"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/hier_display.html">hier_display</a></span><span class="op">(</span><span class="va">h</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Total</span></span>
<span><span class="co">## ├─A</span></span>
<span><span class="co">## ├─B</span></span>
<span><span class="co">## │ └─b1</span></span>
<span><span class="co">## │   ├─b1_a</span></span>
<span><span class="co">## │   └─b1_b</span></span>
<span><span class="co">## ├─X</span></span>
<span><span class="co">## ├─Y</span></span>
<span><span class="co">## └─E</span></span></code></pre>
<p>We note that the underlying <a href="https://cran.r-project.org/package=data.tree" class="external-link"><strong>data.tree</strong></a>
package allows to modify the objects on reference so no explicit
assignment of the form is required.</p>
</div>
<div class="section level3">
<h3 id="information-about-nodes">Information about nodes<a class="anchor" aria-label="anchor" href="#information-about-nodes"></a>
</h3>
<p>Function <code><a href="../reference/hier_info.html">hier_info()</a></code> returns information about the nodes
that are specified in argument <code>leaves</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># about a specific node</span></span>
<span><span class="va">info</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_info.html">hier_info</a></span><span class="op">(</span><span class="va">h</span>, nodes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b1"</span>, <span class="st">"E"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><code>info</code> is a named list where each list element refers to a
queried node. The results for level <code>b1</code> could be extracted
as shown below:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">info</span><span class="op">$</span><span class="va">b1</span></span></code></pre></div>
<pre><code><span><span class="co">## $name</span></span>
<span><span class="co">## [1] "b1"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $is_rootnode</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $level</span></span>
<span><span class="co">## [1] 3</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $is_leaf</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $siblings</span></span>
<span><span class="co">## character(0)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $contributing_codes</span></span>
<span><span class="co">## [1] "b1_a" "b1_b"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $children</span></span>
<span><span class="co">## [1] "b1_a" "b1_b"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $parent</span></span>
<span><span class="co">## [1] "B"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $is_bogus</span></span>
<span><span class="co">## [1] FALSE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $parent_bogus</span></span>
<span><span class="co">## character(0)</span></span></code></pre>
<p>Information about all nodes can be extracted by not specifying
argument <code>leaves</code>.</p>
</div>
<div class="section level3">
<h3 id="convert-to-other-formats">Convert to other formats<a class="anchor" aria-label="anchor" href="#convert-to-other-formats"></a>
</h3>
<p>Function <code><a href="../reference/hier_convert.html">hier_convert()</a></code> takes a hierarchy and allows to
convert the network based structure to different formats while
<code><a href="../reference/hier_export.html">hier_export()</a></code> does the conversion and writes the results to
a file on the disk. The following formats are currently supported:</p>
<ul>
<li>
<code>df</code>: a “@;label”-based format that can be used in <a href="https://cran.r-project.org/package=sdcTable" class="external-link"><strong>sdcTable</strong></a>
</li>
<li>
<code>dt</code>: the same as <code>df</code>, but the result is
returned as a </li>
<li>
<code>argus</code>: also a “@;label”-based format that used to
create hrc-files suitable for <a href="https://github.com/sdcTools/tauargus/" class="external-link"><span class="math inline">\(\tau\)</span>-argus</a>
</li>
<li>
<code>json</code>: a json-encoded string</li>
<li>
<code>code</code>: the required code to re-build the current
hierarchy</li>
<li>
<code>sdc</code>: a <code>list</code> which is a suitable input for
<a href="https://cran.r-project.org/package=sdcTable" class="external-link"><strong>sdcTable</strong></a>
</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># conversion to a "@;label"-based format</span></span>
<span><span class="va">res_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_convert.html">hier_convert</a></span><span class="op">(</span><span class="va">h</span>, as <span class="op">=</span> <span class="st">"df"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">res_df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##   level  name</span></span>
<span><span class="co">## 1     @ Total</span></span>
<span><span class="co">## 2    @@     A</span></span>
<span><span class="co">## 3    @@     B</span></span>
<span><span class="co">## 4   @@@    b1</span></span>
<span><span class="co">## 5  @@@@  b1_a</span></span>
<span><span class="co">## 6  @@@@  b1_b</span></span>
<span><span class="co">## 7    @@     X</span></span>
<span><span class="co">## 8    @@     Y</span></span>
<span><span class="co">## 9    @@     E</span></span></code></pre>
<p>The required code to create this hierarchy could be computed
using:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_convert.html">hier_convert</a></span><span class="op">(</span><span class="va">h</span>, as <span class="op">=</span> <span class="st">"code"</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">code</span>, sep <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## library(sdcHierarchies)</span></span>
<span><span class="co">## tree &lt;- hier_create(root = 'Total', nodes = c('A', 'B', 'X', 'Y', 'E'))</span></span>
<span><span class="co">## tree &lt;- hier_add(tree = tree, root = 'B', nodes = 'b1')</span></span>
<span><span class="co">## tree &lt;- hier_add(tree = tree, root = 'b1', nodes = c('b1_a', 'b1_b'))</span></span>
<span><span class="co">## print(tree)</span></span></code></pre>
<p>Using <code><a href="../reference/hier_export.html">hier_export()</a></code> one can write the results to a file.
This is for example useful if one wants to create <code>hrc</code>-files
that could be used as input for <a href="https://github.com/sdcTools/tauargus/" class="external-link"><span class="math inline">\(\tau\)</span>-argus</a> which can be achieved as
follows:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hier_export.html">hier_export</a></span><span class="op">(</span><span class="va">h</span>, as <span class="op">=</span> <span class="st">"argus"</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"hierarchy.hrc"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-a-hierarchy-from-data-frames-code-or-json">Create a hierarchy from data.frames, code or json<a class="anchor" aria-label="anchor" href="#create-a-hierarchy-from-data-frames-code-or-json"></a>
</h3>
<p><code><a href="../reference/hier_import.html">hier_import()</a></code> returns a network-based hierarchy given
either a data.frame (in <code>@;labs</code>-format), json format, code
or from a tau-argus compatible <code>hrc-file</code>. For example if we
want to create a hierarchy based of <code>res_df</code> which was
previously created using <code><a href="../reference/hier_convert.html">hier_convert()</a></code>, the code is as
simple as:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_import.html">hier_import</a></span><span class="op">(</span>inp <span class="op">=</span> <span class="va">res_df</span>, from <span class="op">=</span> <span class="st">"df"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/hier_display.html">hier_display</a></span><span class="op">(</span><span class="va">n_df</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Total</span></span>
<span><span class="co">## ├─A</span></span>
<span><span class="co">## ├─B</span></span>
<span><span class="co">## │ └─b1</span></span>
<span><span class="co">## │   ├─b1_a</span></span>
<span><span class="co">## │   └─b1_b</span></span>
<span><span class="co">## ├─E</span></span>
<span><span class="co">## ├─X</span></span>
<span><span class="co">## └─Y</span></span></code></pre>
<p>Using <code>hier_import(inp = "hierarchy.hrc", from = "argus")</code>
one could create a sdc hierarchy object directly from a
<code>hrc</code>-file.</p>
</div>
<div class="section level3">
<h3 id="createcompute-hierarchies-from-a-string">Create/Compute hierarchies from a string<a class="anchor" aria-label="anchor" href="#createcompute-hierarchies-from-a-string"></a>
</h3>
<p>Often it is the case, the the nested hierarchy information in encoded
in a string. Function <code><a href="../reference/hier_compute.html">hier_compute()</a></code> allows to transform
such strings into hierarchy objects. One can distinguish two cases: The
first case is where all input codes have the same length while in the
latter case the length of the codes differs. Let’s assume we have a
geographic code given in <code>geo_m</code> where digits 1-2 refer to
the first level, digit 3 to the second and digits 4-5 to the third level
of the hierarchy.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">geo_m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"01051"</span>, <span class="st">"01053"</span>, <span class="st">"01054"</span>, <span class="st">"01055"</span>, <span class="st">"01056"</span>, <span class="st">"01057"</span>, <span class="st">"01058"</span>, <span class="st">"01059"</span>, <span class="st">"01060"</span>, <span class="st">"01061"</span>, <span class="st">"01062"</span>,</span>
<span>  <span class="st">"02000"</span>,</span>
<span>  <span class="st">"03151"</span>, <span class="st">"03152"</span>, <span class="st">"03153"</span>, <span class="st">"03154"</span>, <span class="st">"03155"</span>, <span class="st">"03156"</span>, <span class="st">"03157"</span>, <span class="st">"03158"</span>, <span class="st">"03251"</span>, <span class="st">"03252"</span>, <span class="st">"03254"</span>, <span class="st">"03255"</span>,</span>
<span>  <span class="st">"03256"</span>, <span class="st">"03257"</span>, <span class="st">"03351"</span>, <span class="st">"03352"</span>, <span class="st">"03353"</span>, <span class="st">"03354"</span>, <span class="st">"03355"</span>, <span class="st">"03356"</span>, <span class="st">"03357"</span>, <span class="st">"03358"</span>, <span class="st">"03359"</span>, <span class="st">"03360"</span>,</span>
<span>  <span class="st">"03361"</span>, <span class="st">"03451"</span>, <span class="st">"03452"</span>, <span class="st">"03453"</span>, <span class="st">"03454"</span>, <span class="st">"03455"</span>, <span class="st">"03456"</span>,</span>
<span>  <span class="st">"10155"</span><span class="op">)</span></span></code></pre></div>
<p>Function <code><a href="../reference/hier_compute.html">hier_compute()</a></code> takes a character vector and
creates a hierarchy from it. In argument <code>method</code>, two ways
of specifying the encoded levels can be chosen.</p>
<ul>
<li>
<code>endpos</code>: an integerish-vector must be specified in
argument <code>dim_spec</code> holding the end-position at each
level</li>
<li>
<code>len</code>: an integerish-vector must be specified in argument
<code>dim_spec</code> containing for each level how many digits are
required</li>
</ul>
<p>In case the overal total is not encoded in the input, specifying
argument <code>root</code> allows to give a name to the overall total.
Additionally, it is possible to set the desired output format in
parameter <code>as</code>. In the example below setting
<code>as = "df"</code> returns the result as a <code>data.frame</code>
in <code>@; key</code>-format. The two methods on how to define the
positions of the levels are interchangable and lead to the same
hierarchy as shown below:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_compute.html">hier_compute</a></span><span class="op">(</span></span>
<span>  inp <span class="op">=</span> <span class="va">geo_m</span>, </span>
<span>  dim_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">5</span><span class="op">)</span>, </span>
<span>  root <span class="op">=</span> <span class="st">"Tot"</span>, </span>
<span>  method <span class="op">=</span> <span class="st">"endpos"</span>, </span>
<span>  as <span class="op">=</span> <span class="st">"df"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">v2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_compute.html">hier_compute</a></span><span class="op">(</span></span>
<span>  inp <span class="op">=</span> <span class="va">geo_m</span>, </span>
<span>  dim_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, </span>
<span>  root <span class="op">=</span> <span class="st">"Tot"</span>, </span>
<span>  method <span class="op">=</span> <span class="st">"len"</span>,</span>
<span>  as <span class="op">=</span> <span class="st">"df"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">v1</span>, <span class="va">v2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hier_display.html">hier_display</a></span><span class="op">(</span><span class="va">v1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tot</span></span>
<span><span class="co">## ├─01</span></span>
<span><span class="co">## │ └─010</span></span>
<span><span class="co">## │   ├─01051</span></span>
<span><span class="co">## │   ├─01053</span></span>
<span><span class="co">## │   ├─01054</span></span>
<span><span class="co">## │   ├─01055</span></span>
<span><span class="co">## │   ├─01056</span></span>
<span><span class="co">## │   ├─01057</span></span>
<span><span class="co">## │   ├─01058</span></span>
<span><span class="co">## │   ├─01059</span></span>
<span><span class="co">## │   ├─01060</span></span>
<span><span class="co">## │   ├─01061</span></span>
<span><span class="co">## │   └─01062</span></span>
<span><span class="co">## ├─02</span></span>
<span><span class="co">## │ └─020</span></span>
<span><span class="co">## │   └─02000</span></span>
<span><span class="co">## ├─03</span></span>
<span><span class="co">## │ ├─031</span></span>
<span><span class="co">## │ │ ├─03151</span></span>
<span><span class="co">## │ │ ├─03152</span></span>
<span><span class="co">## │ │ ├─03153</span></span>
<span><span class="co">## │ │ ├─03154</span></span>
<span><span class="co">## │ │ ├─03155</span></span>
<span><span class="co">## │ │ ├─03156</span></span>
<span><span class="co">## │ │ ├─03157</span></span>
<span><span class="co">## │ │ └─03158</span></span>
<span><span class="co">## │ ├─032</span></span>
<span><span class="co">## │ │ ├─03251</span></span>
<span><span class="co">## │ │ ├─03252</span></span>
<span><span class="co">## │ │ ├─03254</span></span>
<span><span class="co">## │ │ ├─03255</span></span>
<span><span class="co">## │ │ ├─03256</span></span>
<span><span class="co">## │ │ └─03257</span></span>
<span><span class="co">## │ ├─033</span></span>
<span><span class="co">## │ │ ├─03351</span></span>
<span><span class="co">## │ │ ├─03352</span></span>
<span><span class="co">## │ │ ├─03353</span></span>
<span><span class="co">## │ │ ├─03354</span></span>
<span><span class="co">## │ │ ├─03355</span></span>
<span><span class="co">## │ │ ├─03356</span></span>
<span><span class="co">## │ │ ├─03357</span></span>
<span><span class="co">## │ │ ├─03358</span></span>
<span><span class="co">## │ │ ├─03359</span></span>
<span><span class="co">## │ │ ├─03360</span></span>
<span><span class="co">## │ │ └─03361</span></span>
<span><span class="co">## │ └─034</span></span>
<span><span class="co">## │   ├─03451</span></span>
<span><span class="co">## │   ├─03452</span></span>
<span><span class="co">## │   ├─03453</span></span>
<span><span class="co">## │   ├─03454</span></span>
<span><span class="co">## │   ├─03455</span></span>
<span><span class="co">## │   └─03456</span></span>
<span><span class="co">## └─10</span></span>
<span><span class="co">##   └─101</span></span>
<span><span class="co">##     └─10155</span></span></code></pre>
<p>If the total is contained in the string, let’s say in the first 3
positions of the input values, the hierarchy can be computed as
follows:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">geo_m_with_tot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Tot"</span>, <span class="va">geo_m</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">geo_m_with_tot</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Tot01051" "Tot01053" "Tot01054" "Tot01055" "Tot01056" "Tot01057"</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">v3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_compute.html">hier_compute</a></span><span class="op">(</span></span>
<span>  inp <span class="op">=</span> <span class="va">geo_m_with_tot</span>, </span>
<span>  dim_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, </span>
<span>  method <span class="op">=</span> <span class="st">"len"</span></span>
<span><span class="op">)</span>; <span class="fu"><a href="../reference/hier_display.html">hier_display</a></span><span class="op">(</span><span class="va">v3</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tot</span></span>
<span><span class="co">## ├─01</span></span>
<span><span class="co">## │ └─010</span></span>
<span><span class="co">## │   ├─01051</span></span>
<span><span class="co">## │   ├─01053</span></span>
<span><span class="co">## │   ├─01054</span></span>
<span><span class="co">## │   ├─01055</span></span>
<span><span class="co">## │   ├─01056</span></span>
<span><span class="co">## │   ├─01057</span></span>
<span><span class="co">## │   ├─01058</span></span>
<span><span class="co">## │   ├─01059</span></span>
<span><span class="co">## │   ├─01060</span></span>
<span><span class="co">## │   ├─01061</span></span>
<span><span class="co">## │   └─01062</span></span>
<span><span class="co">## ├─02</span></span>
<span><span class="co">## │ └─020</span></span>
<span><span class="co">## │   └─02000</span></span>
<span><span class="co">## ├─03</span></span>
<span><span class="co">## │ ├─031</span></span>
<span><span class="co">## │ │ ├─03151</span></span>
<span><span class="co">## │ │ ├─03152</span></span>
<span><span class="co">## │ │ ├─03153</span></span>
<span><span class="co">## │ │ ├─03154</span></span>
<span><span class="co">## │ │ ├─03155</span></span>
<span><span class="co">## │ │ ├─03156</span></span>
<span><span class="co">## │ │ ├─03157</span></span>
<span><span class="co">## │ │ └─03158</span></span>
<span><span class="co">## │ ├─032</span></span>
<span><span class="co">## │ │ ├─03251</span></span>
<span><span class="co">## │ │ ├─03252</span></span>
<span><span class="co">## │ │ ├─03254</span></span>
<span><span class="co">## │ │ ├─03255</span></span>
<span><span class="co">## │ │ ├─03256</span></span>
<span><span class="co">## │ │ └─03257</span></span>
<span><span class="co">## │ ├─033</span></span>
<span><span class="co">## │ │ ├─03351</span></span>
<span><span class="co">## │ │ ├─03352</span></span>
<span><span class="co">## │ │ ├─03353</span></span>
<span><span class="co">## │ │ ├─03354</span></span>
<span><span class="co">## │ │ ├─03355</span></span>
<span><span class="co">## │ │ ├─03356</span></span>
<span><span class="co">## │ │ ├─03357</span></span>
<span><span class="co">## │ │ ├─03358</span></span>
<span><span class="co">## │ │ ├─03359</span></span>
<span><span class="co">## │ │ ├─03360</span></span>
<span><span class="co">## │ │ └─03361</span></span>
<span><span class="co">## │ └─034</span></span>
<span><span class="co">## │   ├─03451</span></span>
<span><span class="co">## │   ├─03452</span></span>
<span><span class="co">## │   ├─03453</span></span>
<span><span class="co">## │   ├─03454</span></span>
<span><span class="co">## │   ├─03455</span></span>
<span><span class="co">## │   └─03456</span></span>
<span><span class="co">## └─10</span></span>
<span><span class="co">##   └─101</span></span>
<span><span class="co">##     └─10155</span></span></code></pre>
<p>The result is the same as <code>v1</code> and <code>v2</code>
previously generated.</p>
<p><code><a href="../reference/hier_compute.html">hier_compute()</a></code> can also deal with inputs that are of
different length as shown in the next example.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## second example, unequal strings; overall total not included in input</span></span>
<span><span class="va">yae_h</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"1.1.1."</span>, <span class="st">"1.1.2."</span>,</span>
<span>  <span class="st">"1.2.1."</span>, <span class="st">"1.2.2."</span>, <span class="st">"1.2.3."</span>, <span class="st">"1.2.4."</span>, <span class="st">"1.2.5."</span>, <span class="st">"1.3.1."</span>,</span>
<span>  <span class="st">"1.3.2."</span>, <span class="st">"1.3.3."</span>, <span class="st">"1.3.4."</span>, <span class="st">"1.3.5."</span>,</span>
<span>  <span class="st">"1.4.1."</span>, <span class="st">"1.4.2."</span>, <span class="st">"1.4.3."</span>, <span class="st">"1.4.4."</span>, <span class="st">"1.4.5."</span>,</span>
<span>  <span class="st">"1.5."</span>, <span class="st">"1.6."</span>, <span class="st">"1.7."</span>, <span class="st">"1.8."</span>, <span class="st">"1.9."</span>, <span class="st">"2."</span>, <span class="st">"3."</span><span class="op">)</span></span>
<span><span class="va">v1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_compute.html">hier_compute</a></span><span class="op">(</span></span>
<span>  inp <span class="op">=</span> <span class="va">yae_h</span>, </span>
<span>  dim_spec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, </span>
<span>  root <span class="op">=</span> <span class="st">"Tot"</span>, </span>
<span>  method <span class="op">=</span> <span class="st">"len"</span></span>
<span><span class="op">)</span>; <span class="fu"><a href="../reference/hier_display.html">hier_display</a></span><span class="op">(</span><span class="va">v1</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Tot</span></span>
<span><span class="co">## ├─1.</span></span>
<span><span class="co">## │ ├─1.1.</span></span>
<span><span class="co">## │ │ ├─1.1.1.</span></span>
<span><span class="co">## │ │ └─1.1.2.</span></span>
<span><span class="co">## │ ├─1.2.</span></span>
<span><span class="co">## │ │ ├─1.2.1.</span></span>
<span><span class="co">## │ │ ├─1.2.2.</span></span>
<span><span class="co">## │ │ ├─1.2.3.</span></span>
<span><span class="co">## │ │ ├─1.2.4.</span></span>
<span><span class="co">## │ │ └─1.2.5.</span></span>
<span><span class="co">## │ ├─1.3.</span></span>
<span><span class="co">## │ │ ├─1.3.1.</span></span>
<span><span class="co">## │ │ ├─1.3.2.</span></span>
<span><span class="co">## │ │ ├─1.3.3.</span></span>
<span><span class="co">## │ │ ├─1.3.4.</span></span>
<span><span class="co">## │ │ └─1.3.5.</span></span>
<span><span class="co">## │ ├─1.4.</span></span>
<span><span class="co">## │ │ ├─1.4.1.</span></span>
<span><span class="co">## │ │ ├─1.4.2.</span></span>
<span><span class="co">## │ │ ├─1.4.3.</span></span>
<span><span class="co">## │ │ ├─1.4.4.</span></span>
<span><span class="co">## │ │ └─1.4.5.</span></span>
<span><span class="co">## │ ├─1.5.</span></span>
<span><span class="co">## │ ├─1.6.</span></span>
<span><span class="co">## │ ├─1.7.</span></span>
<span><span class="co">## │ ├─1.8.</span></span>
<span><span class="co">## │ └─1.9.</span></span>
<span><span class="co">## ├─2.</span></span>
<span><span class="co">## └─3.</span></span></code></pre>
<p>We also note that there is another way to specify the inputs in
<code><a href="../reference/hier_compute.html">hier_compute()</a></code>. Setting argument
<code>method = "list"</code> allows to create a hierarchy from a given
named list. In such a list, the name of a list element is interpreted as
the name of the parent node of all codes of the specific list element.
An example is shown below:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">yae_ll</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">yae_ll</span><span class="op">[[</span><span class="st">"Total"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1."</span>, <span class="st">"2."</span>, <span class="st">"3."</span><span class="op">)</span></span>
<span><span class="va">yae_ll</span><span class="op">[[</span><span class="st">"1."</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"1."</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, <span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">yae_ll</span><span class="op">[[</span><span class="st">"1.1."</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"1.1."</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">yae_ll</span><span class="op">[[</span><span class="st">"1.2."</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"1.2."</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">yae_ll</span><span class="op">[[</span><span class="st">"1.3."</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"1.3."</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">yae_ll</span><span class="op">[[</span><span class="st">"1.4."</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"1.4."</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_compute.html">hier_compute</a></span><span class="op">(</span>inp <span class="op">=</span> <span class="va">yae_ll</span>, root <span class="op">=</span> <span class="st">"Total"</span>, method <span class="op">=</span> <span class="st">"list"</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## Argument 'dim_spec' is ignored when constructing a hierarchy from a nested list.</span></span></code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hier_display.html">hier_display</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Total</span></span>
<span><span class="co">## ├─1.</span></span>
<span><span class="co">## │ ├─1.1.</span></span>
<span><span class="co">## │ │ ├─1.1.1.</span></span>
<span><span class="co">## │ │ └─1.1.2.</span></span>
<span><span class="co">## │ ├─1.2.</span></span>
<span><span class="co">## │ │ ├─1.2.1.</span></span>
<span><span class="co">## │ │ ├─1.2.2.</span></span>
<span><span class="co">## │ │ ├─1.2.3.</span></span>
<span><span class="co">## │ │ ├─1.2.4.</span></span>
<span><span class="co">## │ │ └─1.2.5.</span></span>
<span><span class="co">## │ ├─1.3.</span></span>
<span><span class="co">## │ │ ├─1.3.1.</span></span>
<span><span class="co">## │ │ ├─1.3.2.</span></span>
<span><span class="co">## │ │ ├─1.3.3.</span></span>
<span><span class="co">## │ │ ├─1.3.4.</span></span>
<span><span class="co">## │ │ └─1.3.5.</span></span>
<span><span class="co">## │ ├─1.4.</span></span>
<span><span class="co">## │ │ ├─1.4.1.</span></span>
<span><span class="co">## │ │ ├─1.4.2.</span></span>
<span><span class="co">## │ │ ├─1.4.3.</span></span>
<span><span class="co">## │ │ ├─1.4.4.</span></span>
<span><span class="co">## │ │ ├─1.4.5.</span></span>
<span><span class="co">## │ │ └─1.4.6.</span></span>
<span><span class="co">## │ ├─1.5.</span></span>
<span><span class="co">## │ ├─1.6.</span></span>
<span><span class="co">## │ ├─1.7.</span></span>
<span><span class="co">## │ ├─1.8.</span></span>
<span><span class="co">## │ └─1.9.</span></span>
<span><span class="co">## ├─2.</span></span>
<span><span class="co">## └─3.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="grids">Grids<a class="anchor" aria-label="anchor" href="#grids"></a>
</h3>
<p>Using <code><a href="../reference/hier_grid.html">hier_grid()</a></code> it is possible to compute all
combinations of codes given several hierarchies. This is useful to build
a complete table (e.g for merging purposes). The functionality of
<code>hier_grid</code> is shown below. First, we need to specify some
hierarchies.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">h1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_create.html">hier_create</a></span><span class="op">(</span><span class="st">"Total"</span>, nodes <span class="op">=</span> <span class="va">LETTERS</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">h1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_add.html">hier_add</a></span><span class="op">(</span><span class="va">h1</span>, root <span class="op">=</span> <span class="st">"A"</span>, node <span class="op">=</span> <span class="st">"a1"</span><span class="op">)</span></span>
<span><span class="va">h1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_add.html">hier_add</a></span><span class="op">(</span><span class="va">h1</span>, root <span class="op">=</span> <span class="st">"a1"</span>, node <span class="op">=</span> <span class="st">"aa1"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">h2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_create.html">hier_create</a></span><span class="op">(</span><span class="st">"Total"</span>, <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">h2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_add.html">hier_add</a></span><span class="op">(</span><span class="va">h2</span>, root <span class="op">=</span> <span class="st">"b"</span>, node <span class="op">=</span> <span class="st">"b1"</span><span class="op">)</span></span>
<span><span class="va">h2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_add.html">hier_add</a></span><span class="op">(</span><span class="va">h2</span>, root <span class="op">=</span> <span class="st">"d"</span>, node <span class="op">=</span> <span class="st">"d1"</span><span class="op">)</span></span></code></pre></div>
<p>Note that we - on purpose - added some <em>“bogus”</em> codes to each
<code>h1</code> and <code>h2</code> as codes <code>a1</code> and
<code>aa1</code> in <code>h1</code> and <code>b1</code> and
<code>d1</code> in <code>h2</code> are just identical to their
respective parent categories. Applying <code>hier_grid</code> is as
simple as</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hier_grid.html">hier_grid</a></span><span class="op">(</span><span class="va">h1</span>, <span class="va">h2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        v1    v2</span></span>
<span><span class="co">##  1: Total Total</span></span>
<span><span class="co">##  2:     A Total</span></span>
<span><span class="co">##  3:    a1 Total</span></span>
<span><span class="co">##  4:   aa1 Total</span></span>
<span><span class="co">##  5:     B Total</span></span>
<span><span class="co">##  6:     C Total</span></span>
<span><span class="co">##  7: Total     a</span></span>
<span><span class="co">##  8:     A     a</span></span>
<span><span class="co">##  9:    a1     a</span></span>
<span><span class="co">## 10:   aa1     a</span></span>
<span><span class="co">## 11:     B     a</span></span>
<span><span class="co">## 12:     C     a</span></span>
<span><span class="co">## 13: Total     b</span></span>
<span><span class="co">## 14:     A     b</span></span>
<span><span class="co">## 15:    a1     b</span></span>
<span><span class="co">## 16:   aa1     b</span></span>
<span><span class="co">## 17:     B     b</span></span>
<span><span class="co">## 18:     C     b</span></span>
<span><span class="co">## 19: Total    b1</span></span>
<span><span class="co">## 20:     A    b1</span></span>
<span><span class="co">## 21:    a1    b1</span></span>
<span><span class="co">## 22:   aa1    b1</span></span>
<span><span class="co">## 23:     B    b1</span></span>
<span><span class="co">## 24:     C    b1</span></span>
<span><span class="co">## 25: Total     c</span></span>
<span><span class="co">## 26:     A     c</span></span>
<span><span class="co">## 27:    a1     c</span></span>
<span><span class="co">## 28:   aa1     c</span></span>
<span><span class="co">## 29:     B     c</span></span>
<span><span class="co">## 30:     C     c</span></span>
<span><span class="co">## 31: Total     d</span></span>
<span><span class="co">## 32:     A     d</span></span>
<span><span class="co">## 33:    a1     d</span></span>
<span><span class="co">## 34:   aa1     d</span></span>
<span><span class="co">## 35:     B     d</span></span>
<span><span class="co">## 36:     C     d</span></span>
<span><span class="co">## 37: Total    d1</span></span>
<span><span class="co">## 38:     A    d1</span></span>
<span><span class="co">## 39:    a1    d1</span></span>
<span><span class="co">## 40:   aa1    d1</span></span>
<span><span class="co">## 41:     B    d1</span></span>
<span><span class="co">## 42:     C    d1</span></span>
<span><span class="co">## 43: Total     e</span></span>
<span><span class="co">## 44:     A     e</span></span>
<span><span class="co">## 45:    a1     e</span></span>
<span><span class="co">## 46:   aa1     e</span></span>
<span><span class="co">## 47:     B     e</span></span>
<span><span class="co">## 48:     C     e</span></span>
<span><span class="co">##        v1    v2</span></span></code></pre>
<p>separating all target hierarchies with a <code>,</code>.
<code>hier_grid</code> then computes all combinations of codes from
hierarchies <code>h1</code> and <code>h2</code>. Using the default
options, these bogus codes are included in the output
<code>data.table</code>. Setting argument <code>add_dups = FALSE</code>
removes all rows containing such bogus codes. Setting option
<code>add_levs = TRUE</code> adds some columns labeled
<code>levs_v{n}</code> to the output data set. Each of this colum
contains values which define the hierarchy level of the corresponding
code given in variable v{n} in the same row in the table as shown
below.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/hier_grid.html">hier_grid</a></span><span class="op">(</span><span class="va">h1</span>, <span class="va">h2</span>, add_dups <span class="op">=</span> <span class="cn">FALSE</span>, add_levs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        v1    v2 levs_v1 levs_v2</span></span>
<span><span class="co">##  1: Total Total       1       1</span></span>
<span><span class="co">##  2:     A Total       2       1</span></span>
<span><span class="co">##  3:     B Total       2       1</span></span>
<span><span class="co">##  4:     C Total       2       1</span></span>
<span><span class="co">##  5: Total     a       1       2</span></span>
<span><span class="co">##  6:     A     a       2       2</span></span>
<span><span class="co">##  7:     B     a       2       2</span></span>
<span><span class="co">##  8:     C     a       2       2</span></span>
<span><span class="co">##  9: Total     b       1       2</span></span>
<span><span class="co">## 10:     A     b       2       2</span></span>
<span><span class="co">## 11:     B     b       2       2</span></span>
<span><span class="co">## 12:     C     b       2       2</span></span>
<span><span class="co">## 13: Total     c       1       2</span></span>
<span><span class="co">## 14:     A     c       2       2</span></span>
<span><span class="co">## 15:     B     c       2       2</span></span>
<span><span class="co">## 16:     C     c       2       2</span></span>
<span><span class="co">## 17: Total     d       1       2</span></span>
<span><span class="co">## 18:     A     d       2       2</span></span>
<span><span class="co">## 19:     B     d       2       2</span></span>
<span><span class="co">## 20:     C     d       2       2</span></span>
<span><span class="co">## 21: Total     e       1       2</span></span>
<span><span class="co">## 22:     A     e       2       2</span></span>
<span><span class="co">## 23:     B     e       2       2</span></span>
<span><span class="co">## 24:     C     e       2       2</span></span>
<span><span class="co">##        v1    v2 levs_v1 levs_v2</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="interactively-create-or-modify-hierarchies">Interactively create or modify hierarchies<a class="anchor" aria-label="anchor" href="#interactively-create-or-modify-hierarchies"></a>
</h3>
<p>The package also contains a shiny-based interactive app that can be
started using <code><a href="../reference/hier_app.html">hier_app()</a></code>. The app allows to pass as input
either a character vector (that should be converted into a hierarchy) or
an existing hierarchy and can be started as follows given the hierarchy
previously generated using <code><a href="../reference/hier_compute.html">hier_compute()</a></code>:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hier_app.html">hier_app</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code></pre></div>
<p>If a character vector is passed to <code><a href="../reference/hier_app.html">hier_app()</a></code>, the
interface allows to specify the arguments for
<code><a href="../reference/hier_compute.html">hier_compute()</a></code>. Once a hierarchy is created, the interface
changes and the tree can be dynamically changed by dragging nodes
around. Futhermore, it is possible to add, remove or rename nodes. The
required code to construct the current hierarchy is displayed and can be
saved to disk. Furthermore, there is functionality to <em>undo</em> the
last step as well as to export results to either the
<strong>R</strong>-session or write results to a file. This is
especially helpful if one wants to create for example an
<code>hrc</code>-file as input for <span class="math inline">\(\tau\)</span>-argus. Please note that
<code><a href="../reference/hier_app.html">hier_app()</a></code> is able to return the modified hierarchy and not
only save results to disk. In order to continue working, one may assign
the result to a new object as shown in the code above.</p>
</div>
<div class="section level3">
<h3 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>In case you have any suggestions or improvements, please feel free to
file an issue at <a href="https://github.com/bernhard-da/sdcHierarchies/issues" class="external-link"><strong>our
issue tracker</strong></a> or contribute to the package by filing a <a href="https://github.com/bernhard-da/sdcHierarchies/pulls" class="external-link"><strong>pull
request</strong></a> against the master branch.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Bernhard Meindl.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
